# Фронт: меню «Поставщикам услуг», мастер регистрации, инструкция

## 1. «Поставщикам услуг» — меню, а не ссылка

**Сейчас:** ссылка ведёт сразу на мастер регистрации.

**Нужно:**
- «Поставщикам услуг» — это **меню** (dropdown или отдельная страница с пунктами).
- Один из пунктов — **«Зарегистрироваться»** → переход на мастер регистрации.
- Остальные пункты — по ТЗ (например, инструкция, контакты и т.д.).

Реализация — только на фронте (маршруты, меню, пункт «Зарегистрироваться»).

---

## 2. Предупреждение при повторной заявке

**Логика:**
- При переходе на мастер (по клику «Зарегистрироваться») **сначала** проверять, есть ли у пользователя уже отправленные заявки.
- Если **есть** — показать предупреждение:  
  «Заявка от вас уже отправлена. Вы уверены, что хотите подать ещё заявку?»  
  Кнопки: «Да» (открыть мастер) / «Нет» (остаться/вернуться).
- Только при выборе «Да» — открывать мастер.  
  (У одного владельца может быть несколько юрлиц — повторные заявки допустимы, но осознанно.)

**Бэкенд (уже есть):**
- `GET /api/v1/provider-registration/has-application/`  
  Ответ: `{ "has_application": true/false, "count": N }`  
  Вызывать при заходе на страницу/шаг мастера (один раз до показа мастера).

**Фронт:**
- Перед показом мастера: запрос к `has-application/`.
- Если `has_application === true` — показать диалог с текстом выше и кнопками «Да» / «Нет».
- При «Да» — открыть мастер; при «Нет» — не открывать (или вернуть в меню «Поставщикам услуг»).

---

## 3. Краткая инструкция для провайдеров — в базе или нет?

**Рекомендация: да, в базе.**

Причины:
- Один источник правды: правки только в админке, без деплоя фронта.
- Версионирование и история (если использовать модель с версиями).
- Мультиязычность: один тип документа, переводы по языкам (en, ru, de, me).
- Единый подход с офертами и политиками (LegalDocument + переводы).

**Вариант реализации в БД:**
1. Добавить тип документа, например `provider_instruction` (или `provider_guide`):
   - в `LegalDocumentType`: code = `provider_instruction`, без привязки к стране/оферте.
2. Хранить контент в `LegalDocument` + `DocumentTranslation` (по языкам).
3. Отдавать фронту через API, например:
   - `GET /api/v1/legal/documents/provider-instruction/?language=de`  
   или общий эндпоинт документов по типу и языку.

**Альтернатива (проще, но менее гибко):** статическая страница или markdown на фронте; правки только через деплой.

**Итог:** пункт меню «Краткая инструкция для провайдеров» лучше вести на документ из БД (тип `provider_instruction` или аналог), отдаваемый API по языку.

---

## Чек-лист для фронта

- [ ] «Поставщикам услуг» — меню с пунктом «Зарегистрироваться» (и при необходимости «Инструкция»).
- [ ] При переходе «Зарегистрироваться» — запрос `GET .../provider-registration/has-application/`.
- [ ] Если `has_application === true` — диалог «Заявка уже отправлена. Подать ещё заявку?» → только при «Да» открывать мастер.
- [ ] Пункт «Краткая инструкция» ведёт на страницу, контент которой берётся из API документа (после появления типа документа и эндпоинта на бэкенде).
